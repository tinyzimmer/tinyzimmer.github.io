
<!DOCTYPE html>
<html lang="en" data-figures="" class="page">
  <head>
<title>GStreamer, Go and Kubernetes | tinyzimmer&#39;s blog</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.81.0-DEV" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta property="og:locale" content="en" />

<meta property="og:type" content="article">
<meta name="description" content="Back when I was working on kvdi (a Kubernetes-native &ldquo;Virtual Desktop Infrastructure&rdquo; written in Go), I got to the inevitable point that I wanted …">
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="">
<meta name="twitter:title" content="GStreamer, Go and Kubernetes" />
<meta property="og:url" content="https://tinyzimmer.github.io/posts/gstreamer-go-and-k8s/" />
<meta property="og:title" content="GStreamer, Go and Kubernetes" />
<meta property="og:description" content="Back when I was working on kvdi (a Kubernetes-native &ldquo;Virtual Desktop Infrastructure&rdquo; written in Go), I got to the inevitable point that I wanted …" />
<meta property="og:image" content="https://tinyzimmer.github.io/" />
<link rel="apple-touch-icon" sizes="180x180" href='https://tinyzimmer.github.io/icons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='https://tinyzimmer.github.io/icons/favicon-32x32.png'>
<link rel="manifest" href='https://tinyzimmer.github.io/icons/site.webmanifest'>
<link rel="mask-icon" href='https://tinyzimmer.github.io/safari-pinned-tab.svg' color="#002538">
<meta name="msapplication-TileColor" content="#002538">
<meta name="theme-color" content="#002538">

<link rel="canonical" href="https://tinyzimmer.github.io/posts/gstreamer-go-and-k8s/">

    

    
    
    <link rel="preload" href="https://tinyzimmer.github.io/css/styles.37cea41fe2c1b43e2a17095e01eb999e8701c9f0ba06d4df0a9db514a215e26dfbdb8a606a36c9d3b54bb1c09fd4a9ce41ee8f6788a8c6b17067830f34396135.css" integrity = "sha512-N86kH&#43;LBtD4qFwleAeuZnocByfC6BtTfCp21FKIV4m3724pgajbJ07VLscCf1KnOQe6PZ4ioxrFwZ4MPNDlhNQ==" as="style" crossorigin="anonymous">
    <link rel="preload" href="https://tinyzimmer.github.io/js/bundle.min.ec2df4e684839a7262bd8727295bc18361d524bff4178c2ab408cd130864f159d6f4d197a75d620088512bd139ee818107be4a35004377b663918e52a6777a8d.js" as="script" integrity=
    "sha512-7C305oSDmnJivYcnKVvBg2HVJL/0F4wqtAjNEwhk8VnW9NGXp11iAIhRK9E57oGBB75KNQBDd7ZjkY5Spnd6jQ==" crossorigin="anonymous">

    
    <link rel="stylesheet" type="text/css" href="https://tinyzimmer.github.io/css/styles.37cea41fe2c1b43e2a17095e01eb999e8701c9f0ba06d4df0a9db514a215e26dfbdb8a606a36c9d3b54bb1c09fd4a9ce41ee8f6788a8c6b17067830f34396135.css" integrity="sha512-N86kH&#43;LBtD4qFwleAeuZnocByfC6BtTfCp21FKIV4m3724pgajbJ07VLscCf1KnOQe6PZ4ioxrFwZ4MPNDlhNQ==" crossorigin="anonymous">
    
  </head>
  
  
  
    
  
  <body data-code="100" data-lines="true" id="documentTop">

<header class="nav_header" >
  <nav class="nav">
    <a href='https://tinyzimmer.github.io/' class="nav_brand nav_item">
        tinyzimmer&#39;s blog
      <div class="nav_close">
        <div>
          <svg class="icon">
  <use xlink:href="#open-menu"></use>
</svg>
          <svg class="icon">
  <use xlink:href="#closeme"></use>
</svg>
        </div>
      </div>
    </a>
    <div class='nav_body nav_body_'>
      
      
      
        

      
<div class='follow'>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

    <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content">
    <h1 class="post_title">GStreamer, Go and Kubernetes</h1><div class="post_meta">
  
    <svg class="icon">
  <use xlink:href="#calendar"></use>
</svg>
    <span class="post_date">
      Jan 27, 2021</span>
</div>

    
  <div class="post_share">
    Share on:
    <a href="https://twitter.com/intent/tweet?text=GStreamer%2c%20Go%20and%20Kubernetes&url=https%3a%2f%2ftinyzimmer.github.io%2fposts%2fgstreamer-go-and-k8s%2f&tw_p=tweetbutton" class="twitter" title="Share on Twitter" target="_blank" rel="nofollow">
      <svg class="icon">
  <use xlink:href="#twitter"></use>
</svg>
    </a>
    <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2ftinyzimmer.github.io%2fposts%2fgstreamer-go-and-k8s%2f&t=GStreamer%2c%20Go%20and%20Kubernetes" class="facebook" title="Share on Facebook" target="_blank" rel="nofollow">
      <svg class="icon">
  <use xlink:href="#facebook"></use>
</svg>
    </a>
    <a href="#linkedinshare" id = "linkedinshare" class="linkedin" title="Share on LinkedIn" rel="nofollow">
      <svg class="icon">
  <use xlink:href="#linkedin"></use>
</svg>
    </a>
    <a href="https://tinyzimmer.github.io/posts/gstreamer-go-and-k8s/" title="Copy Link" class="link link_yank">
      <svg class="icon">
  <use xlink:href="#copy"></use>
</svg>
    </a>
  </div>

    
    <p>Back when I was working on <a href="https://github.com/tinyzimmer/kvdi">kvdi</a> (a Kubernetes-native &ldquo;Virtual Desktop Infrastructure&rdquo; written in Go), I got to the inevitable point that I wanted support for audio streams from the user desktops.
In a web-based VDI solution, this posed several challenges:</p>
<ul>
<li>Raw PCM data is huge, and as such is not suitable for streaming over low latency networks.
<ul>
<li>To work with browser-native audio APIs, we need either raw PCM or one from a small set of browser supported encodings (WASM opens more doors, but I wanted to avoid it).</li>
</ul>
</li>
<li>VNC, the protocol serving the user desktop displays, does not have support for audio.
<ul>
<li>QEMU Extended Audio exists in the protocol now, but is only implemented by the QEMU VNC server/client.</li>
</ul>
</li>
<li>While compensating for stream size and having to utilize side channels because of the above, we&rsquo;d still like to be able to achieve near real-time playback.
<ul>
<li>WebRTC can shine in areas like this, but facilitating the STUN protocol from inside a Kubernetes cluster was not an adventure I wanted to start just yet.</li>
</ul>
</li>
</ul>
<p>In another blog post I may go over these challenges and how I was able to overcome them in implementation, but that is not the purpose of this article.
For now, what&rsquo;s important is that PulseAudio, GStreamer, webm/opus, and websockets saved the day.
The first implementation was accomplished entirely through subprocesses and redirecting shell pipes, but this is a poor way to write code and an almost insulting way to utilize the true power of the GStreamer API.</p>
<p>Unfortunately, there didn&rsquo;t exist any truly comprehensive and feature-complete Go bindings for GStreamer, or at least any that implemented all of the APIs I needed to accomplish my goal. And so, <a href="https://github.com/tinyzimmer/go-gst">go-gst</a>, and later <a href="https://github.com/tinyzimmer/go-glib">go-glib</a> were forked and born.
I started from the excellent work done by the <a href="https://github.com/gotk3/gotk3">gotk3 project</a>, and then saw the rest of the GStreamer API bindings to pseudo-completion (these bindings remain actively developed with some help starting to come in from the community).</p>
<p>Fast forward a bit (and with huge thanks to <a href="https://coaxion.net/">slomo</a> from the GStreamer team and his fantastic write up on <a href="https://coaxion.net/blog/2017/09/exporting-a-gobject-c-api-from-rust-code-and-using-it-from-c-python-javascript-and-others/">exporting GObject APIs from Rust</a>), I found myself with the ability to write full GStreamer applications (and plugins!) entirely in Go.
I&rsquo;ll likely do another writeup in the future on the adventure of exporting GObjects from gocode, but for now the only question that remained was, what should I try next? Well since Go, where did that bring me? Right back to Kubernetes.</p>
<h2 id="gstreamer-pipelines-on-kubernetes">GStreamer Pipelines on Kubernetes</h2>
<p>The idea was simple. Define a <em>CustomResourceDefinition</em> that implements a sort of &ldquo;yamlized&rdquo; version of the better-known <code>gst-launch-1.0</code> from the GStreamer tools.
<em>CustomResources</em> using this API could have some arbitrary source destination watched for multimedia files, and have those objects automatically fed through their pipeline.
For source and destinations I chose MinIO first, primarily for the ease with which it can be deployed in development environments.</p>
<p>I started, as I do with almost all of my custom Kubernetes controllers, with the <a href="https://github.com/operator-framework/operator-sdk">operator-sdk</a>.
Perhaps I&rsquo;ll do a more in-depth post later on how the APIs and controllers were designed for this use case, but the meat of what I want to cover is in the translation from <code>yaml</code> to dynamic GStreamer pipelines.
In the end, the PoC for a <em>CustomResource</em> implementing one of the APIs looked like this:</p>
<p>The full PoC can be found here: <a href="https://github.com/tinyzimmer/gst-pipeline-operator">https://github.com/tinyzimmer/gst-pipeline-operator</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">    ---
    <span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">pipelines.gst.io/v1</span>
    <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Transform</span>
    <span style="color:#f92672">metadata</span>:
      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">mp4-converter</span>
    <span style="color:#f92672">spec</span>:
      <span style="color:#75715e"># Globals will be merged into the `src` and `sink` configs during processing.</span>
      <span style="color:#75715e"># This is useful if all operations are happening against the same MinIO server</span>
      <span style="color:#75715e"># and buckets. You can also direct output to/from different servers and buckets</span>
      <span style="color:#75715e"># by declaring those values in their respective areas instead of here.</span>
      <span style="color:#f92672">globals</span>:
        <span style="color:#f92672">minio</span>:
          <span style="color:#f92672">endpoint</span>: <span style="color:#e6db74">&#34;minio.default.svc.cluster.local:9000&#34;</span>   <span style="color:#75715e"># The endpoint for the MinIO server</span>
          <span style="color:#f92672">insecureNoTLS</span>: <span style="color:#66d9ef">true</span>                                <span style="color:#75715e"># Use HTTP</span>
          <span style="color:#f92672">region</span>: <span style="color:#ae81ff">us-east-1                                 </span> <span style="color:#75715e"># The region of the bucket</span>
          <span style="color:#f92672">bucket</span>: <span style="color:#ae81ff">gst-processing                            </span> <span style="color:#75715e"># The bucket to watch for files</span>
          <span style="color:#f92672">credentialsSecret</span>:                                 <span style="color:#75715e"># The secret containing READ credentials for MinIO</span>
            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">minio-credentials</span>
      <span style="color:#f92672">src</span>:
        <span style="color:#f92672">minio</span>:
          <span style="color:#f92672">key</span>: <span style="color:#ae81ff">drop/  </span> <span style="color:#75715e"># Watch all files placed in the drop/ prefix</span>
      <span style="color:#f92672">sink</span>:
        <span style="color:#f92672">minio</span>:
          <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;mp4/{{ .SrcName }}.mp4&#34;</span>   <span style="color:#75715e"># Generate an output name from this template. If the src file was called</span>
      <span style="color:#f92672">pipeline</span>:                           <span style="color:#75715e"># drop/video.mkv then this would evaluate to mp4/video.mp4.</span>
        <span style="color:#f92672">debug</span>:
          <span style="color:#f92672">dot</span>:
            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">debug/ </span> <span style="color:#75715e"># Optionally dump DOT graphs to the debug/ prefix for each pipeline</span>
            <span style="color:#f92672">render</span>: <span style="color:#ae81ff">png  </span> <span style="color:#75715e"># Optionally render those DOT graphs to PNG in addition to the DOT format.</span>

        <span style="color:#75715e"># The pipeline definition. This is the &#34;yamlized&#34; version of the gst-launch-1.0 syntax.</span>
        <span style="color:#f92672">elements</span>:
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">decodebin</span>
          <span style="color:#f92672">alias</span>: <span style="color:#ae81ff">dbin         </span> <span style="color:#75715e"># The same as applying a `name` in gst-launch-1.0</span>

        - <span style="color:#f92672">goto</span>: <span style="color:#ae81ff">dbin          </span> <span style="color:#75715e"># Take a compatible sink pad from the decodebin</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">queue</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">audioconvert</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">audioresample</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">voaacenc</span>
        - <span style="color:#f92672">linkto</span>: <span style="color:#ae81ff">mux         </span> <span style="color:#75715e"># Link the output of this chain to the `mux` element</span>

        - <span style="color:#f92672">goto</span>: <span style="color:#ae81ff">dbin          </span> <span style="color:#75715e"># Go back to the decodebin and take the next compatible sink pad</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">queue</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">videoconvert</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">x264enc</span>

        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">mp4mux        </span> <span style="color:#75715e"># Joins the output from the audio stream and the video stream into an mp4</span>
          <span style="color:#f92672">alias</span>: <span style="color:#ae81ff">mux          </span> <span style="color:#75715e"># container.</span>
    
        <span style="color:#75715e"># The last element evaluated in the pipeline (either in order or via goto/linkto) has its output</span>
        <span style="color:#75715e"># sent to the MinIO output object.</span>
</code></pre></div><p>There is obviously a lot happening here besides just the pipeline parsing.
For example, the plugins facilitating the reading and writing to/from MinIO were written using the <code>go-gst</code> bindings as well, but we can table that discussion for another time.
The part I want to focus on is the <code>elements</code> block at the end.
This is where I ventured to mimic (as closely as possible) how this would look in <code>gst-launch-1.0</code> syntax. A comparable pipeline to the above on the command-line would look like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">    gst-launch-1.0 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        miniosrc location<span style="color:#f92672">=</span>$object <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        ! decodebin name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dbin&#34;</span> dbin. ! queue ! videoconvert ! x246enc <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        ! mp4mux name<span style="color:#f92672">=</span>mux ! miniosink location<span style="color:#f92672">=</span>$object.mp4 dbin. <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>        ! queue ! audioconvert ! audioresample ! voaacenc ! mux.
</code></pre></div><p>The finished code that parses the <code>yaml</code> (after it has been deserialized) into a GStreamer pipeline can be found <a href="https://github.com/tinyzimmer/gst-pipeline-operator/blob/v0.0.1/cmd/runner/parse_cr_pipeline.go">here</a>, but we&rsquo;ll walk through it piece-by-piece.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span> 

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;errors&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>

	<span style="color:#e6db74">&#34;github.com/tinyzimmer/go-gst/gst&#34;</span>
	<span style="color:#a6e22e">pipelinesmeta</span> <span style="color:#e6db74">&#34;github.com/tinyzimmer/gst-pipeline-operator/apis/meta/v1&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">buildPipelineFromCR</span>(<span style="color:#a6e22e">cfg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">PipelineConfig</span>, <span style="color:#a6e22e">srcObject</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">Object</span>, <span style="color:#a6e22e">sinkObjects</span> []<span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">Object</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Pipeline</span>, <span style="color:#66d9ef">error</span>) {
	<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">NewPipeline</span>(<span style="color:#e6db74">&#34;&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
	}

    <span style="color:#a6e22e">pipelineCfg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cfg</span>.<span style="color:#a6e22e">GetElements</span>()
    
	<span style="color:#a6e22e">src</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">makeSrcElement</span>(<span style="color:#a6e22e">srcObject</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
	}

    <span style="color:#a6e22e">pipeline</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">src</span>)

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}
</code></pre></div><p>The beginning is pretty straight-forward. First, we create a new <em>GstPipeline</em> with a generated name.
The <code>pipelineCfg</code> is populated with the deserialized contents of the <code>elements</code> block shown above in the <em>CustomResource</em>.
We then make our source MinIO element pointing at the object that triggered this pipeline and add it to the <em>GstPipeline</em>.</p>
<p>Now is where things begin to get exciting. We need to iterate the element configurations provided by the user, and link them up properly in the pipeline.
We also need to take into account that the user may have defined elements that are providing dynamic sink pads and can&rsquo;t be linked right away, and we&rsquo;ll get more into that later.</p>
<p>To start, we&rsquo;ll declare some pointers outside of the scope of the <code>for</code> loop we are about to do.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Track a pointer to the last element we iterated on in the pipeline
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">last</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Element</span> = <span style="color:#a6e22e">src</span>
<span style="color:#75715e">// Track a pointer to the user-supplied configuration defining that last element 
</span><span style="color:#75715e">// (with some extra metadata we added to help us later)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">lastCfg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">GstElementConfig</span>
</code></pre></div><p>We can now start looping through our elements:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">elementCfg</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pipelineCfg</span> {

		<span style="color:#75715e">// If we are jumping in the pipeline - set the last pointers to the appropriate element and config
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">elementCfg</span>.<span style="color:#a6e22e">GoTo</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
            <span style="color:#75715e">// Retrieve the user configuration for this element from the pipeline config
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// and set it to the last pointer.
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">lastCfg</span> = <span style="color:#a6e22e">pipelineCfg</span>.<span style="color:#a6e22e">GetByAlias</span>(<span style="color:#a6e22e">elementCfg</span>.<span style="color:#a6e22e">GoTo</span>)
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">lastCfg</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;No configuration referenced by alias %s&#34;</span>, <span style="color:#a6e22e">elementCfg</span>.<span style="color:#a6e22e">GoTo</span>)
			}
            <span style="color:#75715e">// Retrieve the actual gst.Element from the pipeline for this configuration and set it to the
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// last pointer. How this function works will be shown below.
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">elementForPipeline</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">lastCfg</span>)
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
            }
            <span style="color:#75715e">// Continue on to the next element in the configuration
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">continue</span>
		}

		<span style="color:#75715e">// If we are linking the previous element - perform the links depending on the alias.
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// Sets the last pointers as well, but at this point the user is probably doing a goto
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// next or this is the end of the pipeline and will be linked directly to the MinIO sink.
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">elementCfg</span>.<span style="color:#a6e22e">LinkTo</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
            <span style="color:#75715e">// Retrieve the configuration for the element we are linking to
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">thisCfg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">pipelineCfg</span>.<span style="color:#a6e22e">GetByAlias</span>(<span style="color:#a6e22e">elementCfg</span>.<span style="color:#a6e22e">LinkTo</span>)
            <span style="color:#75715e">// Retrieve the actual element we are linking to from the pipeline
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">thisElem</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">elementForPipeline</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">thisCfg</span>)
            <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
            }
            <span style="color:#75715e">// Perform the link, how this works will be shown below.
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">linkLast</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">lastCfg</span>, <span style="color:#a6e22e">thisElem</span>, <span style="color:#a6e22e">thisCfg</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
			}
            <span style="color:#75715e">// Declare the linked-to element as the last element iterated on
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">last</span> = <span style="color:#a6e22e">thisElem</span>
            <span style="color:#a6e22e">lastCfg</span> = <span style="color:#a6e22e">thisCfg</span>
            <span style="color:#75715e">// Continue to the next element in the configuration
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">continue</span>
		}

        <span style="color:#75715e">// Neither of the conditions apply. This is just a regular element block with optional
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// properties.
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// Retrieve (or create) the element from the pipeline (more details below)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">element</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">elementForPipeline</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">elementCfg</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
		}
        <span style="color:#75715e">// Link to whatever the last pointers are set to
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">linkLast</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">lastCfg</span>, <span style="color:#a6e22e">element</span>, <span style="color:#a6e22e">elementCfg</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
		}

        <span style="color:#75715e">// Set this element as the last object iterated on.
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">last</span> = <span style="color:#a6e22e">element</span>
		<span style="color:#a6e22e">lastCfg</span> = <span style="color:#a6e22e">elementCfg</span>
    }
    
    <span style="color:#75715e">// Finally we create the sink element and link it to wherever we ended in the loop.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sink</span>, <span style="color:#a6e22e">sinkCfg</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">makeSinkElement</span>(<span style="color:#a6e22e">sinkobj</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
    }
    <span style="color:#a6e22e">pipeline</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">sink</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">linkLast</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">last</span>, <span style="color:#a6e22e">lastCfg</span>, <span style="color:#a6e22e">sink</span>, <span style="color:#a6e22e">sinkCfg</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
    }
</code></pre></div><p>The two functions we need to explore a little more in-depth here to truly feel the magic, are <code>elementForPipeline</code> and <code>linkLast</code>.</p>
<p>The way it is utilized above, <code>elementForPipeline</code> needs to be an idempotent <em>GstElement</em> fetcher for us.
That is to say, if the element has not been created and added to the pipeline yet, we want to do so.
However, if it was already created and added to the pipeline, we don&rsquo;t want to recreate it and just want the original reference back.
How that looked in practice is like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">elementForPipeline</span>(<span style="color:#a6e22e">pipeline</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Pipeline</span>, <span style="color:#a6e22e">cfg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">GstElementConfig</span>) (<span style="color:#a6e22e">thiselem</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Element</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {
    <span style="color:#75715e">// Below this we set a name to the configuration that we can re-use later when we create
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// the element for the first time. This is the name that GStreamer generated and assigned
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// to the element when it was first created.
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// First check if we have that name set in our configuration.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cfg</span>.<span style="color:#a6e22e">GetPipelineName</span>(); <span style="color:#a6e22e">name</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
        <span style="color:#75715e">// We iterated on this configuration before, and thus already have the element&#39;s *real* name
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// We can retrieve the element reference directly from the pipeline by that name.
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">thiselem</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">pipeline</span>.<span style="color:#a6e22e">GetElementByName</span>(<span style="color:#a6e22e">name</span>)
        <span style="color:#66d9ef">return</span>
	}
    <span style="color:#75715e">// We did not set a name to this configuration, so we must be creating the element for the first time.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// makeElement is a bit of an ugly wrapper around taking the potential properties provided by the user
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// and converting them to GValues of the appropriate type based on the element&#39;s properties.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">thiselem</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">makeElement</span>(<span style="color:#a6e22e">cfg</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#75715e">// Add the element to the pipeline
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">pipeline</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">thiselem</span>)
    <span style="color:#75715e">// Set the name assigned to the element for later use.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">cfg</span>.<span style="color:#a6e22e">SetPipelineName</span>(<span style="color:#a6e22e">thiselem</span>.<span style="color:#a6e22e">GetName</span>())
	<span style="color:#66d9ef">return</span>
}
</code></pre></div><p>The other piece we want to explore is <code>linkLast</code>. Most elements in GStreamer provide static <code>src</code> and <code>sink</code> pads that can be linked
directly while the pipeline is being built. In the go bindings, this is as simple as calling <code>last.Link(this)</code>.
However, and in our example above as well, there are some elements that provide dynamic pads. In the example above this is the <code>decodebin</code> element.
I won&rsquo;t get into the full nitty-gritty of the magic happening underneath the hood in <code>decodebin</code>, but what&rsquo;s important for now is that when it is first created
it has no idea what sort of output it will be generating.</p>
<p>Instead it produces signals once it has found pads it can provide, and the application can tap into those signals with callbacks to do dynamic linking at playtime.
With that in mind, let&rsquo;s look at the code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">linkLast</span>(<span style="color:#a6e22e">pipeline</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Pipeline</span>, <span style="color:#a6e22e">last</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Element</span>, <span style="color:#a6e22e">lastCfg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">GstElementConfig</span>, <span style="color:#a6e22e">element</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Element</span>, <span style="color:#a6e22e">elementCfg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">pipelinesmeta</span>.<span style="color:#a6e22e">GstElementConfig</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#75715e">// Check if the last element we are linking to has a static src pad we can link to the
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// sink pad on this element. If it does, we are in luck! Just perform the link and return.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// One thing to note is that the API does not yet support defining filter caps for linking.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// The bindings can do this via LinkFiltered, and for now in the K8s API the user can use
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// a capsfilter element.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">srcpad</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">last</span>.<span style="color:#a6e22e">GetStaticPad</span>(<span style="color:#e6db74">&#34;src&#34;</span>); <span style="color:#a6e22e">srcpad</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">last</span>.<span style="color:#a6e22e">Link</span>(<span style="color:#a6e22e">element</span>)
	}

    <span style="color:#75715e">// Unfortunately we don&#39;t have static pads. In the example above, &#34;last&#34; currently represents
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// the decodebin element.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Similar to how we tracked names in the configurations we were passing around, another field
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// is present in the configuration structure that allows us to track peers for later consumption. 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Add the element we are *supposed* to link as a peer to the configuration.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">lastCfg</span>.<span style="color:#a6e22e">AddPeer</span>(<span style="color:#a6e22e">elementCfg</span>)

    <span style="color:#75715e">// We are hoping (which is the case with decodebin at least) that the element will emit the &#34;no-more-pads&#34;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// signal once it has created all the src pads it can provide. We connect to this signal and add a callback
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// that will be executed after the pipeline has been started and decodebin has built out its own pipeline.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">last</span>.<span style="color:#a6e22e">Connect</span>(<span style="color:#e6db74">&#34;no-more-pads&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">self</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">Element</span>) {
        <span style="color:#75715e">// Retrieve all the available pads from the element that emitted this signal
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">pads</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">GetPads</span>()
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">ErrorMessage</span>(<span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">DomainLibrary</span>, <span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">LibraryErrorFailed</span>, <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>(), <span style="color:#e6db74">&#34;&#34;</span>)
			<span style="color:#66d9ef">return</span>
        }
        <span style="color:#75715e">// We are now going to loop over the available pads and link them to the appropriate
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// elements that are already created and waiting for a friend in the pipeline.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">Pads</span>:
		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">srcpad</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pads</span> {
			<span style="color:#75715e">// Skip already linked and non-src pads
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">srcpad</span>.<span style="color:#a6e22e">IsLinked</span>() <span style="color:#f92672">||</span> <span style="color:#a6e22e">srcpad</span>.<span style="color:#a6e22e">Direction</span>() <span style="color:#f92672">!=</span> <span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">PadDirectionSource</span> {
				<span style="color:#66d9ef">continue</span> <span style="color:#a6e22e">Pads</span>
            }
            <span style="color:#75715e">// Iterate the peers that were registered to the configuration for this element
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">peer</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">lastCfg</span>.<span style="color:#a6e22e">GetPeers</span>() {
                <span style="color:#75715e">// Retrieve the actual element from the pipeline using the function we defined
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// earlier.
</span><span style="color:#75715e"></span>				<span style="color:#a6e22e">peerElem</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">elementForPipeline</span>(<span style="color:#a6e22e">pipeline</span>, <span style="color:#a6e22e">peer</span>)
				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
					<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">ErrorMessage</span>(<span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">DomainLibrary</span>, <span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">LibraryErrorFailed</span>, <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>(), <span style="color:#e6db74">&#34;&#34;</span>)
					<span style="color:#66d9ef">return</span>
                }
                <span style="color:#75715e">// Retrieve the sink pad from that element
</span><span style="color:#75715e"></span>				<span style="color:#a6e22e">peersink</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">peerElem</span>.<span style="color:#a6e22e">GetStaticPad</span>(<span style="color:#e6db74">&#34;sink&#34;</span>)
				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">peersink</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
					<span style="color:#a6e22e">self</span>.<span style="color:#a6e22e">ErrorMessage</span>(<span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">DomainLibrary</span>, <span style="color:#a6e22e">gst</span>.<span style="color:#a6e22e">LibraryErrorFailed</span>, <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;peer %s does not have a static sink pad&#34;</span>, <span style="color:#a6e22e">peer</span>.<span style="color:#a6e22e">Name</span>), <span style="color:#e6db74">&#34;&#34;</span>)
					<span style="color:#66d9ef">return</span>
                }
                <span style="color:#75715e">// If this new src pad can be linked to the sink pad then link it.
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// We check CanLink first becuse there may be multiple src pads with
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// only specific elements compatible with the media type in them.
</span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">srcpad</span>.<span style="color:#a6e22e">CanLink</span>(<span style="color:#a6e22e">peersink</span>) {
					<span style="color:#a6e22e">srcpad</span>.<span style="color:#a6e22e">Link</span>(<span style="color:#a6e22e">peersink</span>)
					<span style="color:#66d9ef">continue</span> <span style="color:#a6e22e">Pads</span>
				}
			}
		}
	})

    <span style="color:#75715e">// We are done here - if we defined a callback it will get fired later.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}
</code></pre></div><p>With the above all done (and Kubernetes APIs implemented), we go drop some random MKV into our &ldquo;drop/&rdquo; prefix in MinIO and see what gets created.
The additional fields on the <em>CustomResource</em> for debugging tell the runner (in areas not covered here) to also dump graphs of what the pipeline ends up looking like.</p>
<p>I recognize you may need to download and zoom to properly view the contents of the image.</p>
<p><img src="/images/gstreamer-pipeline-operator-dot.png" alt=":inline"></p>
<p>We can see here that the MKV I dropped actually already contained H264 video. So we essentially converted it RAW, straight back into H264, and then just slapped it into a different container.
But the important thing is that all the linking (both static and dynamic) happened correctly!.</p>
<p>Well that&rsquo;s all I got for this post. If you found it interesting then stay tuned for my posts in the future, and feel free to hop over to my <a href="https://github.com/tinyzimmer">Github</a> and take a look at this and some of my other GStreamer related projects recently.</p>

    
      
    
  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    
    <h2 class="mt-4">Recent Posts</h2>
    <ul class="flex-column">
      <li>
        <a href="https://tinyzimmer.github.io/posts/welcome/" class="nav-link">Welcome</a>
      </li>
    </ul>
  </section>
</aside>

</div>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/> 
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
</svg>

<footer class="footer">
  <div class="footer_inner wrap pale">
    <img src='https://tinyzimmer.github.io/icons/apple-touch-icon.png' class="icon icon_2 transparent">
    <p>Copyright<span class="year"></span> TINYZIMMER&#39;S BLOG. All Rights Reserved</p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <use xlink:href="#arrow"></use>
</svg>
</a>

  </div>
</footer>

    <script type="text/javascript" src="https://tinyzimmer.github.io/js/bundle.min.ec2df4e684839a7262bd8727295bc18361d524bff4178c2ab408cd130864f159d6f4d197a75d620088512bd139ee818107be4a35004377b663918e52a6777a8d.js" integrity="sha512-7C305oSDmnJivYcnKVvBg2HVJL/0F4wqtAjNEwhk8VnW9NGXp11iAIhRK9E57oGBB75KNQBDd7ZjkY5Spnd6jQ==" crossorigin="anonymous"></script>
    
  </body>
</html>
